<!DOCTYPE html>
<html>

<head>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      line-height: 1.6;
      background-color: #1a1a1a;
      color: #fff;
      margin: 0;
      padding: 20px;
    }

    .code-container {
      position: relative;
      background-color: #2a2a2a;
      border-radius: 4px;
      padding: 10px;
      margin-bottom: 20px;
    }

    .code-container .copy-button {
      position: absolute;
      top: 5px;
      right: 5px;
      cursor: pointer;
      color: #fff;
      background-color: #444;
      border: none;
      padding: 5px;
      border-radius: 3px;
      font-size: 12px;
      outline: none;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      margin-bottom: 20px;
    }

    th, td {
      border: 1px solid #333;
      padding: 8px;
      text-align: left;
    }

    th {
      background-color: #444;
    }

    details {
      margin-bottom: 20px;
    }

    summary {
      cursor: pointer;
      color: #00f;
    }

    summary:hover {
      color: #0af;
    }
  </style>
</head>

<body>

  <h1>V1 Bryan Snaily CAD Integration</h1>
  <p>This script holds functions for FiveM scripts to co-operate with Snaily CAD. These functions can be called from other
    scripts with appropriate exports.</p>

  <h2>V2 coming soon</h2>

  <h2>Setup</h2>
  <div class="code-container">
    <button class="copy-button" onclick="copyToClipboard(this, 'configDefaults')">&#x2398; Copy</button>
    <code id="configDefaults">
      <pre>
Config.Defaults = {
  Framework = 'qbcore' -- Choose between 'qbcore' or 'esx'

  registrationStatus = 'Valid'
}
      </pre>
    </code>
  </div>
  <p>This table helps to set Default values in certain functions.</p>

  <div class="code-container">
    <button class="copy-button" onclick="copyToClipboard(this, 'configApi')">&#x2398; Copy</button>
    <code id="configApi">
      <pre>
Config.API = {
    URL = 'api_url',
    TOKEN = 'token',
    TOKEN_HEADER_NAME = 'snaily-cad-api-token',
}
      </pre>
    </code>
  </div>
  <p><code>URL</code> - Link on which your CAD is hosted (example:
    https://api.your-domain-here/v1/ or https://api-test.your-domain-here/v1/)</p>

  <p><code>TOKEN</code> - You can find this Token in your CAD Settings (Admin > CAD Settings > API Token)</p>

  <h2>Exports</h2>

  <div class="code-container">
    <button class="copy-button" onclick="copyToClipboard(this, 'isCitizenRegistered')">&#x2398; Copy</button>
    <code id="isCitizenRegistered">
      <pre>
exports['bryan_snaily']:IsCitizenRegistered(firstname, lastname)
      </pre>
    </code>
  </div>

  <table>
    <tr>
      <th>Parameter</th>
      <th>Type</th>
      <th>Optional</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
    <tr>
      <td><code>firstname</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>Character's Firstname</td>
    </tr>
    <tr>
      <td><code>lastname</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>Character's Lastname</td>
    </tr>
  </table>

  <div class="code-container">
    <button class="copy-button" onclick="copyToClipboard(this, 'insertNewCitizen')">&#x2398; Copy</button>
    <code id="insertNewCitizen">
      <pre>
exports['bryan_snaily']:InsertNewCitizen(firstname, lastname, birthdate, gender, ethnicity, height, weight, hairColor, eyeColor, address)
      </pre>
    </code>
  </div>

  <table>
    <tr>
      <th>Parameter</th>
      <th>Type</th>
      <th>Optional</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
    <tr>
      <td><code>firstname</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>Firstname</td>
    </tr>
    <tr>
      <td><code>lastname</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>Lastname</td>
    </tr>
    <tr>
      <td><code>birthdate</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>Birthdate (format: YYYY/MM/DD)</td>
    </tr>
    <tr>
      <td><code>gender</code></td>
      <td>(string/int)</td>
      <td>Yes</td>
      <td>Male</td>
      <td>Gender</td>
    </tr>
    <tr>
      <td><code>ethnicity</code></td>
      <td>(string)</td>
      <td>Yes</td>
      <td>(Random)</td>
      <td>Ethnicity</td>
    </tr>
    <tr>
      <td><code>height</code></td>
      <td>(int)</td>
      <td>Yes</td>
      <td></td>
      <td>Height</td>
    </tr>
    <tr>
      <td><code>weight</code></td>
      <td>(int)</td>
      <td>Yes</td>
      <td></td>
      <td>Weight</td>
    </tr>
    <tr>
      <td><code>hairColor</code></td>
      <td>(string)</td>
      <td>Yes</td>
      <td></td>
      <td>Hair Color</td>
    </tr>
    <tr>
      <td><code>eyeColor</code></td>
      <td>(string)</td>
      <td>Yes</td>
      <td></td>
      <td>Eye Color</td>
    </tr>
    <tr>
      <td><code>address</code></td>
      <td>(string)</td>
      <td>Yes</td>
      <td></td>
      <td>Address</td>
    </tr>
  </table>

  <div class="code-container">
    <button class="copy-button" onclick="copyToClipboard(this, 'setLicenseToCitizen')">&#x2398; Copy</button>
    <code id="setLicenseToCitizen">
      <pre>
exports['bryan_snaily']:SetLicenseToCitizen(license, value, firstname, lastname)
      </pre>
    </code>
  </div>

  <table>
    <tr>
      <th>Parameter</th>
      <th>Type</th>
      <th>Optional</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
    <tr>
      <td><code>license</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>License (<code>weaponLicense</code>/<code>driversLicense</code>/<code>pilotLicense</code>/...)</td>
    </tr>
    <tr>
      <td><code>value</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>License Value (example: <code>Valid</code>/<code>Suspended</code>/...)</td>
    </tr>
    <tr>
      <td><code>firstname</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>Character's Firstname</td>
    </tr>
    <tr>
      <td><code>lastname</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>Character's Lastname</td>
    </tr>
  </table>

  <h3>ESX</h3>

  <details>
    <summary>Insert New Citizen</summary>
    <br>

    <p><code>esx_identity/server/main.lua</code></p>

    <div class="code-container">
      <button class="copy-button" onclick="copyToClipboard(this, 'esxIdentityCallback')">&#x2398; Copy</button>
      <code id="esxIdentityCallback">
        <pre>
ESX.RegisterServerCallback('esx_identity:registerIdentity', function(source, cb, data)
    &lt;...&gt;

    local formattedFirstName = formatName(data.firstname)
    local formattedLastName = formatName(data.lastname)
    local formattedDate = formatDate(data.dateofbirth)

    data.firstname = formattedFirstName
    data.lastname = formattedLastName
    data.dateofbirth = formattedDate
    local Identity = {
        firstName = formattedFirstName,
        lastName = formattedLastName,
        dateOfBirth = formattedDate,
        sex = data.sex,
        height = data.height
    }

    -- Insert This Here --
    exports['bryan_snaily']:InsertNewCitizen(formattedFirstName, formattedLastName, formattedDate, data.sex, nil, data.height)
    --

    TriggerEvent('esx_identity:completedRegistration', source, data)
    TriggerClientEvent('esx_identity:setPlayerData', source, Identity)
    cb(true)
end)
        </pre>
      </code>
    </div>
  </details>

  <h3>QB</h3>

  <details>
    <summary>Insert New Citizen</summary>
    <br>

    <p><code>qb-multicharacter/server/main.lua</code></p>

    <div class="code-container">
      <button class="copy-button" onclick="copyToClipboard(this, 'qbMulticharacterEvent')">&#x2398; Copy</button>
      <code id="qbMulticharacterEvent">
        <pre>
RegisterNetEvent('qb-multicharacter:server:createCharacter', function(data)
    local src = source
    local newData = {}
    newData.cid = data.cid
    newData.charinfo = data
    if QBCore.Player.Login(src, false, newData) then
        repeat
            Wait(10)
        until hasDonePreloading[src]

        -- Insert This Here --
        exports['bryan_snaily']:InsertNewCitizen(data.firstname, data.lastname, data.birthdate, data.gender)
        --

        &lt;...&gt;
    end
end)
        </pre>
      </code>
    </div>
  </details>


<script>
  function copyToClipboard(button, codeId) {
    const codeElement = document.getElementById(codeId);
    const codeText = codeElement.innerText.trim();

    const tempTextArea = document.createElement('textarea');
    tempTextArea.value = codeText;
    document.body.appendChild(tempTextArea);
    tempTextArea.select();
    document.execCommand('copy');
    document.body.removeChild(tempTextArea);
  }
</script>
</body>

</html>