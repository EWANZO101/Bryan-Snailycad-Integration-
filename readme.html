<!DOCTYPE html>
<html>

<head>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      line-height: 1.6;
    }

    h1 {
      font-size: 28px;
      margin-bottom: 10px;
    }

    h2 {
      font-size: 24px;
      margin-bottom: 10px;
    }

    h3 {
      font-size: 20px;
      margin-bottom: 10px;
    }

    code {
      background-color: #f4f4f4;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      margin-bottom: 20px;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }

    th {
      background-color: #f2f2f2;
    }

    details {
      margin-bottom: 20px;
    }

    summary {
      cursor: pointer;
    }

    summary:hover {
      color: blue;
    }

  </style>
</head>

<body>

  <h1>V1 Bryan Snaily CAD Integration</h1>
  <p>This script holds functions for FiveM scripts to co-operate with Snaily CAD. These functions can be called from other
    scripts with appropriate exports.</p>

  <h2>V2 coming soon</h2>

  <h2>Setup</h2>
  <code>
    <pre>
Config.Defaults = {
  Framework = 'qbcore' -- Choose between 'qbcore' or 'esx'

  registrationStatus = 'Valid'
}
    </pre>
  </code>

  <p>This table helps to set Default values in certain functions.</p>

  <code>
    <pre>
Config.API = {
    URL = 'api_url',
    TOKEN = 'token',
    TOKEN_HEADER_NAME = 'snaily-cad-api-token',
}
    </pre>
  </code>

  <p><code>URL</code> - Link on which your CAD is hosted (example:
    https://api.your-domain-here/v1/ or https://api-test.your-domain-here/v1/)</p>

  <p><code>TOKEN</code> - You can find this Token in your CAD Settings (Admin > CAD Settings > API Token)</p>

  <h2>Exports</h2>

  <h3>Is Citizen Registered</h3>
  <p>Checks if the Citizen exists in the CAD system</p>

  <code>
    <pre>
exports['bryan_snaily']:IsCitizenRegistered(firstname, lastname)
    </pre>
  </code>

  <table>
    <tr>
      <th>Paramater</th>
      <th>Type</th>
      <th>Optional</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
    <tr>
      <td><code>firstname</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>Character's Firstname</td>
    </tr>
    <tr>
      <td><code>lastname</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>Character's Lastname</td>
    </tr>
  </table>

  <h3>Insert New Citizen</h3>

  <code>
    <pre>
exports['bryan_snaily']:InsertNewCitizen(firstname, lastname, birthdate, gender, ethnicity, height, weight, hairColor, eyeColor, address)
    </pre>
  </code>

  <table>
    <tr>
      <th>Paramater</th>
      <th>Type</th>
      <th>Optional</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
    <tr>
      <td><code>firstname</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>Firstname</td>
    </tr>
    <tr>
      <td><code>lastname</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>Lastname</td>
    </tr>
    <tr>
      <td><code>birthdate</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>Birthdate (format: YYYY/MM/DD)</td>
    </tr>
    <tr>
      <td><code>gender</code></td>
      <td>(string/int)</td>
      <td>Yes</td>
      <td>Male</td>
      <td>Gender</td>
    </tr>
    <tr>
      <td><code>ethnicity</code></td>
      <td>(string)</td>
      <td>Yes</td>
      <td>(Random)</td>
      <td>Ethnicity</td>
    </tr>
    <tr>
      <td><code>height</code></td>
      <td>(int)</td>
      <td>Yes</td>
      <td></td>
      <td>Height</td>
    </tr>
    <tr>
      <td><code>weight</code></td>
      <td>(int)</td>
      <td>Yes</td>
      <td></td>
      <td>Weight</td>
    </tr>
    <tr>
      <td><code>hairColor</code></td>
      <td>(string)</td>
      <td>Yes</td>
      <td></td>
      <td>Hair Color</td>
    </tr>
    <tr>
      <td><code>eyeColor</code></td>
      <td>(string)</td>
      <td>Yes</td>
      <td></td>
      <td>Eye Color</td>
    </tr>
    <tr>
      <td><code>address</code></td>
      <td>(string)</td>
      <td>Yes</td>
      <td></td>
      <td>Address</td>
    </tr>
  </table>

  <h3>Set License to Citizen</h3>

  <code>
    <pre>
exports['bryan_snaily']:SetLicenseToCitizen(license, value, firstname, lastname)
    </pre>
  </code>

  <table>
    <tr>
      <th>Paramater</th>
      <th>Type</th>
      <th>Optional</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
    <tr>
      <td><code>license</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>License (<code>weaponLicense</code>/<code>driversLicense</code>/<code>pilotLicense</code>/...)</td>
    </tr>
    <tr>
      <td><code>value</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>License Value (example: <code>Valid</code>/<code>Suspended</code>/...)</td>
    </tr>
    <tr>
      <td><code>firstname</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>Character's Firstname</td>
    </tr>
    <tr>
      <td><code>lastname</code></td>
      <td>(string)</td>
      <td></td>
      <td></td>
      <td>Character's Lastname</td>
    </tr>
  </table>

  <h3>ESX</h3>

  <details>
    <summary>Insert New Citizen</summary>
    <br>

    <p><code>esx_identity/server/main.lua</code></p>

    <code>
      <pre>
ESX.RegisterServerCallback('esx_identity:registerIdentity', function(source, cb, data)
    &lt;...&gt;

    local formattedFirstName = formatName(data.firstname)
    local formattedLastName = formatName(data.lastname)
    local formattedDate = formatDate(data.dateofbirth)

    data.firstname = formattedFirstName
    data.lastname = formattedLastName
    data.dateofbirth = formattedDate
    local Identity = {
        firstName = formattedFirstName,
        lastName = formattedLastName,
        dateOfBirth = formattedDate,
        sex = data.sex,
        height = data.height
    }

    -- Insert This Here --
    exports['bryan_snaily']:InsertNewCitizen(formattedFirstName, formattedLastName, formattedDate, data.sex, nil, data.height)
    --

    TriggerEvent('esx_identity:completedRegistration', source, data)
    TriggerClientEvent('esx_identity:setPlayerData', source, Identity)
    cb(true)
end)
    </pre>
    </code>
  </details>

  <h3>QB</h3>

  <details>
    <summary>Insert New Citizen</summary>
    <br>

    <p><code>qb-multicharacter/server/main.lua</code></p>

    <code>
      <pre>
RegisterNetEvent('qb-multicharacter:server:createCharacter', function(data)
    local src = source
    local newData = {}
    newData.cid = data.cid
    newData.charinfo = data
    if QBCore.Player.Login(src, false, newData) then
        repeat
            Wait(10)
        until hasDonePreloading[src]

        -- Insert This Here --
        exports['bryan_snaily']:InsertNewCitizen(data.firstname, data.lastname, data.birthdate, data.gender)
        --

        &lt;...&gt;
    end
end)
    </pre>
    </code>
  </details>

</body>

</html>
